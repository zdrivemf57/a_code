<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <title>練習</title>
</head>

<body>
    <p>
        問題１：
        「次へ」ボタン(button#next)をクリックするたびに、div#stage内の画像が順番に切り替わるようにしてください。<br>使用する画像は、flower1.jpg ～ flower5.jpg です。
    </p>
    <p>
        問題２：
        「次へ」ボタンを押さなくても、3.5秒ごとに自動的に画像が切り替わるようにしてください。
    </p>
    <button id="next">次へ</button>
    <button id="stop">止める</button>
    <br>
    <div id="stage" style="border: 1px dotted #000; display: inline-block; padding: 20px;">
        div#stage<br><br>
        <img src="images/flower1.jpg" width="400">
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            const photo = {
                num: 1,
                next: function () {
                    if (this.num == 5) {
                        this.num = 1;
                    } else {
                        this.num++;
                    }
                    return 'images/flower' + this.num + '.jpg';
                },
                stop: function () {
                    clearInterval(t);
                    clearInterval(t2);
                }
            };
            // 問題１
            $('#next').click(function () {
                clearInterval(t);
                $('#stage img').attr('src', photo.next());
                const t2 = setInterval(function () {
                    $('#stage img').attr('src', photo.next());
                }, 3500);
            });
            // 問題２
            const t = setInterval(function () {
                $('#stage img').attr('src', photo.next());
            }, 3500);

            $('#stop').click(function () {
                photo.stop();
            });
        });
    </script>
</body>

</html>